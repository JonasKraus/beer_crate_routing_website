!function(){function e(){date=new Date,date.setTime(date.getTime()+6048e5),document.cookie="res="+window.innerWidth+"x"+window.innerHeight+";expires="+date.toGMTString()}function n(){if(void 0==o("beercrate_routing_pseudonym")||""==o("beercrate_routing_pseudonym")||null==o("beercrate_routing_pseudonym")){for(b=prompt("Hallo, falls du bereits eine Probanden-ID angelegt hast geb sie hier ein. Sonst klicke auf Abbrechen um eine anzulegen.");""==b;)n();null==b&&(window.location.href="../start.html"),b=b.toUpperCase()}else b=o("beercrate_routing_pseudonym").toUpperCase(),document.getElementById("loggedUser").innerHTML=b.toUpperCase()}function t(){var n=new XMLHttpRequest,t="scripts/getUser.php",r="pseudonym="+b;n.open("POST",t,!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.addEventListener("load",function(t){if(n.status>=200&&n.status<300){try{v=JSON.parse(n.responseText)}catch(e){return void(window.location.href="../start.html")}e(),document.getElementById("loggedUser").innerHTML=b.toUpperCase(),d(b.toUpperCase());for(var r=0;r<=v.progress;r++){var o=document.getElementById("breadcrump"+r).classList;o.contains("unfinished")&&(o.remove("unfinished"),o.add("active")),o.add("finished")}var i=document.getElementById("survey").classList,u=document.getElementById("paragraph_code").classList,c=document.getElementById("code").classList,l=document.getElementById("forms").classList,m=document.getElementById("form_exam").classList,p=document.getElementById("form_exercise").classList,g=document.getElementById("para_forms").classList,h=document.getElementById("button_download").classList,f=document.getElementById("para_download_explanation").classList,L=document.getElementById("button_download");switch(v.progress){case 0:a(v.pseudonym,v.progress+1,y),i.remove("hidden");break;case 1:i.add("hidden"),h.remove("hidden"),f.remove("hidden");var E="download/"+v.version+"/game.zip";L.innerHTML="<a href="+E+' class="button" id="button_download">Download Spiel 1</a>';break;case 2:i.remove("hidden"),h.add("hidden"),f.add("hidden"),a(v.pseudonym,v.progress+1,w);break;case 3:if(Date.parse(B)>Date.parse(new Date)){var I=new Date(B).getDate()+"."+(new Date(B).getMonth()+1)+"."+new Date(B).getFullYear();s("Du kannst erst ab dem "+I+" weiter machen."),i.add("hidden"),L.outerHTML="<p>Bitte warte bis zum <b>"+I+"</b> um fortzufahren.</p>"}else{i.add("hidden"),h.remove("hidden"),f.remove("hidden");var x="download/"+(v.version+1)%2+"/game.zip";L.innerHTML="<a href="+x+' class="button" id="button_download">Download Spiel 2</a>'}break;case 4:i.remove("hidden"),h.add("hidden"),f.add("hidden"),a(v.pseudonym,v.progress+1,k);break;case 5:i.add("hidden"),h.add("hidden"),u.remove("hidden"),c.remove("hidden"),l.remove("hidden"),null!=v.exam&&""!=v.exam?m.add("hidden"):m.remove("hidden"),null!=v.exercise&&""!=v.exercise?p.add("hidden"):p.remove("hidden"),null!=v.exercise&&""!=v.exam?g.add("hidden"):g.remove("hidden"),document.getElementById("code").innerHTML="<h2>"+v.code+"</h2>"}}else window.location.href="../start.html"}),n.send(r)}function d(e){Math.random()>=.5;r(e)}function r(e){var n="beercrate_routing_";date=new Date,date.setTime(date.getTime()+6048e5),document.cookie=n+"pseudonym="+e+";expires="+date.toGMTString(),document.cookie="res="+screen.width+"x"+screen.height+";expires="+date.toGMTString()}function o(e){for(var n=e+"=",t=document.cookie.split(";"),d=0;d<t.length;d++){for(var r=t[d];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(n))return r.substring(n.length,r.length)}return""}function a(e,n,t){var d=new XMLHttpRequest,r="scripts/generateUpdateLink.php",o=btoa(i(7)+JSON.stringify([btoa(e),btoa(n)])),a="fd="+o;d.open("POST",r,!0),d.setRequestHeader("Content-type","application/x-www-form-urlencoded"),d.onreadystatechange=function(){if(4==d.readyState&&200==d.status){var e=window.location.href.toString();e=e.replace("http://","").replace("https://","");var n=e.indexOf("/");e=e.substr(0,n),e=encodeURI(e),document.getElementById("survey").href=t+"?dn="+e.toString()+"&ul="+d.responseText}},d.send(a)}function i(e){for(var n="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",d=0;d<e;d++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}function s(e){var n=document.getElementById("snackbar");n.innerHTML=e,n.className="show",setTimeout(function(){n.className=n.className.replace("show","")},3e3)}function u(){document.getElementById("breadcrump0").onclick=c,document.getElementById("breadcrump1").onclick=l,document.getElementById("breadcrump2").onclick=m,document.getElementById("breadcrump3").onclick=p,document.getElementById("breadcrump4").onclick=g,document.getElementById("breadcrump5").onclick=h}function c(){0==v.progress?s("Bitte fülle den Fragebogen aus.<br>Klicke dazu auf den angezeigten Link."):f(v.progress>0)}function l(){1==v.progress?s("Bitte spiele zunächst das Spiel.<br>Klicke dazu auf den Download-Button um es herunter zuladen."):f(v.progress>1)}function m(){2==v.progress?s("Bitte fülle den Fragebogen aus.<br>Klicke dazu auf den angezeigten Link."):f(v.progress>2)}function p(){3==v.progress?s("Bitte spiele zunächst das Spiel.<br>Klicke dazu auf den Download-Button um es herunter zuladen."):f(v.progress>3)}function g(){4==v.progress?s("Bitte fülle den abschließenden Fragebogen aus.<br>Klicke dazu auf den angezeigten Link."):f(v.progress>4)}function h(){5==v.progress?s("Du hast bereits alle Aufgaben gemeistert.<br>Lade nun den angezeigten Code in deinen Moodle-Account"):f(v.progress>5)}function f(e){s(e?"Diesen Schritt hast du bereits bearbeitet.<br>Arbeite an Schritt "+(v.progress+1)+" weiter.":"Um diesen Schritt bearbeiten zu können, <br>beende zunächst Schritt "+(v.progress+1)+".")}var b=(document.cookie,null),v=null,y="https://surveys.informatik.uni-ulm.de/limesurvey/index.php/895276",w="https://surveys.informatik.uni-ulm.de/limesurvey/index.php/472153",k="https://surveys.informatik.uni-ulm.de/limesurvey/index.php/11326",B="Mon Dec 05 2016 00:00:00 GMT+0100 (Mitteleuropäische Zeit)";document.addEventListener("DOMContentLoaded",function(){n(),t(),u()})}();